# Generated from OWScript.g4 by ANTLR 4.7.1
from antlr4 import *
from io import StringIO
from typing.io import TextIO
import sys


def serializedATN():
    with StringIO() as buf:
        buf.write("\3\u608b\ua72a\u8133\ub9ed\u417c\u3be7\u7786\u5964\2\35")
        buf.write("\u00d1\b\1\4\2\t\2\4\3\t\3\4\4\t\4\4\5\t\5\4\6\t\6\4\7")
        buf.write("\t\7\4\b\t\b\4\t\t\t\4\n\t\n\4\13\t\13\4\f\t\f\4\r\t\r")
        buf.write("\4\16\t\16\4\17\t\17\4\20\t\20\4\21\t\21\4\22\t\22\4\23")
        buf.write("\t\23\4\24\t\24\4\25\t\25\4\26\t\26\4\27\t\27\4\30\t\30")
        buf.write("\4\31\t\31\4\32\t\32\4\33\t\33\4\34\t\34\4\35\t\35\4\36")
        buf.write("\t\36\3\2\3\2\3\3\3\3\3\4\3\4\3\5\3\5\3\6\3\6\3\7\3\7")
        buf.write("\3\b\3\b\3\t\3\t\3\n\3\n\3\13\3\13\3\f\3\f\3\r\3\r\3\r")
        buf.write("\3\16\3\16\3\17\3\17\3\17\3\17\3\20\3\20\3\21\3\21\3\22")
        buf.write("\3\22\3\23\3\23\3\23\3\23\3\23\3\23\3\23\3\23\3\23\5\23")
        buf.write("l\n\23\3\24\3\24\3\24\3\24\3\24\3\24\3\24\3\24\3\24\3")
        buf.write("\24\3\24\3\24\3\24\5\24{\n\24\3\25\3\25\7\25\177\n\25")
        buf.write("\f\25\16\25\u0082\13\25\3\25\3\25\3\26\6\26\u0087\n\26")
        buf.write("\r\26\16\26\u0088\3\27\6\27\u008c\n\27\r\27\16\27\u008d")
        buf.write("\3\27\3\27\6\27\u0092\n\27\r\27\16\27\u0093\3\30\3\30")
        buf.write("\7\30\u0098\n\30\f\30\16\30\u009b\13\30\3\30\3\30\3\31")
        buf.write("\3\31\7\31\u00a1\n\31\f\31\16\31\u00a4\13\31\3\31\3\31")
        buf.write("\3\32\3\32\3\32\5\32\u00ab\n\32\3\32\3\32\5\32\u00af\n")
        buf.write("\32\3\32\5\32\u00b2\n\32\5\32\u00b4\n\32\3\32\3\32\3\33")
        buf.write("\3\33\3\33\5\33\u00bb\n\33\3\33\3\33\3\34\3\34\3\35\6")
        buf.write("\35\u00c2\n\35\r\35\16\35\u00c3\3\36\3\36\3\36\3\36\7")
        buf.write("\36\u00ca\n\36\f\36\16\36\u00cd\13\36\3\36\3\36\3\36\3")
        buf.write("\u00cb\2\37\3\3\5\4\7\5\t\6\13\7\r\b\17\t\21\n\23\13\25")
        buf.write("\f\27\r\31\16\33\17\35\20\37\21!\22#\23%\24\'\25)\26+")
        buf.write("\27-\30/\31\61\32\63\33\65\34\67\359\2;\2\3\2\t\4\2>>")
        buf.write("@@\6\2\f\f\16\17$$^^\3\2\62;\5\2C\\aac|\6\2\62;C\\aac")
        buf.write("|\b\2\"\"/\60\62;C\\aac|\4\2\13\13\"\"\2\u00e6\2\3\3\2")
        buf.write("\2\2\2\5\3\2\2\2\2\7\3\2\2\2\2\t\3\2\2\2\2\13\3\2\2\2")
        buf.write("\2\r\3\2\2\2\2\17\3\2\2\2\2\21\3\2\2\2\2\23\3\2\2\2\2")
        buf.write("\25\3\2\2\2\2\27\3\2\2\2\2\31\3\2\2\2\2\33\3\2\2\2\2\35")
        buf.write("\3\2\2\2\2\37\3\2\2\2\2!\3\2\2\2\2#\3\2\2\2\2%\3\2\2\2")
        buf.write("\2\'\3\2\2\2\2)\3\2\2\2\2+\3\2\2\2\2-\3\2\2\2\2/\3\2\2")
        buf.write("\2\2\61\3\2\2\2\2\63\3\2\2\2\2\65\3\2\2\2\2\67\3\2\2\2")
        buf.write("\3=\3\2\2\2\5?\3\2\2\2\7A\3\2\2\2\tC\3\2\2\2\13E\3\2\2")
        buf.write("\2\rG\3\2\2\2\17I\3\2\2\2\21K\3\2\2\2\23M\3\2\2\2\25O")
        buf.write("\3\2\2\2\27Q\3\2\2\2\31S\3\2\2\2\33V\3\2\2\2\35X\3\2\2")
        buf.write("\2\37\\\3\2\2\2!^\3\2\2\2#`\3\2\2\2%k\3\2\2\2\'z\3\2\2")
        buf.write("\2)|\3\2\2\2+\u0086\3\2\2\2-\u008b\3\2\2\2/\u0095\3\2")
        buf.write("\2\2\61\u009e\3\2\2\2\63\u00b3\3\2\2\2\65\u00ba\3\2\2")
        buf.write("\2\67\u00be\3\2\2\29\u00c1\3\2\2\2;\u00c5\3\2\2\2=>\7")
        buf.write("\'\2\2>\4\3\2\2\2?@\7`\2\2@\6\3\2\2\2AB\7,\2\2B\b\3\2")
        buf.write("\2\2CD\7\61\2\2D\n\3\2\2\2EF\7-\2\2F\f\3\2\2\2GH\7/\2")
        buf.write("\2H\16\3\2\2\2IJ\7*\2\2J\20\3\2\2\2KL\7+\2\2L\22\3\2\2")
        buf.write("\2MN\7.\2\2N\24\3\2\2\2OP\7]\2\2P\26\3\2\2\2QR\7_\2\2")
        buf.write("R\30\3\2\2\2ST\7o\2\2TU\7u\2\2U\32\3\2\2\2VW\7u\2\2W\34")
        buf.write("\3\2\2\2XY\7o\2\2YZ\7k\2\2Z[\7p\2\2[\36\3\2\2\2\\]\7B")
        buf.write("\2\2] \3\2\2\2^_\7>\2\2_\"\3\2\2\2`a\7@\2\2a$\3\2\2\2")
        buf.write("bc\7?\2\2cl\7?\2\2de\7>\2\2el\7?\2\2fg\7@\2\2gl\7?\2\2")
        buf.write("hi\7#\2\2il\7?\2\2jl\t\2\2\2kb\3\2\2\2kd\3\2\2\2kf\3\2")
        buf.write("\2\2kh\3\2\2\2kj\3\2\2\2l&\3\2\2\2m{\7?\2\2no\7-\2\2o")
        buf.write("{\7?\2\2pq\7/\2\2q{\7?\2\2rs\7,\2\2s{\7?\2\2tu\7\61\2")
        buf.write("\2u{\7?\2\2vw\7`\2\2w{\7?\2\2xy\7\'\2\2y{\7?\2\2zm\3\2")
        buf.write("\2\2zn\3\2\2\2zp\3\2\2\2zr\3\2\2\2zt\3\2\2\2zv\3\2\2\2")
        buf.write("zx\3\2\2\2{(\3\2\2\2|\u0080\7$\2\2}\177\n\3\2\2~}\3\2")
        buf.write("\2\2\177\u0082\3\2\2\2\u0080~\3\2\2\2\u0080\u0081\3\2")
        buf.write("\2\2\u0081\u0083\3\2\2\2\u0082\u0080\3\2\2\2\u0083\u0084")
        buf.write("\7$\2\2\u0084*\3\2\2\2\u0085\u0087\t\4\2\2\u0086\u0085")
        buf.write("\3\2\2\2\u0087\u0088\3\2\2\2\u0088\u0086\3\2\2\2\u0088")
        buf.write("\u0089\3\2\2\2\u0089,\3\2\2\2\u008a\u008c\t\4\2\2\u008b")
        buf.write("\u008a\3\2\2\2\u008c\u008d\3\2\2\2\u008d\u008b\3\2\2\2")
        buf.write("\u008d\u008e\3\2\2\2\u008e\u008f\3\2\2\2\u008f\u0091\7")
        buf.write("\60\2\2\u0090\u0092\t\4\2\2\u0091\u0090\3\2\2\2\u0092")
        buf.write("\u0093\3\2\2\2\u0093\u0091\3\2\2\2\u0093\u0094\3\2\2\2")
        buf.write("\u0094.\3\2\2\2\u0095\u0099\t\5\2\2\u0096\u0098\t\6\2")
        buf.write("\2\u0097\u0096\3\2\2\2\u0098\u009b\3\2\2\2\u0099\u0097")
        buf.write("\3\2\2\2\u0099\u009a\3\2\2\2\u009a\u009c\3\2\2\2\u009b")
        buf.write("\u0099\3\2\2\2\u009c\u009d\7<\2\2\u009d\60\3\2\2\2\u009e")
        buf.write("\u00a2\t\5\2\2\u009f\u00a1\t\7\2\2\u00a0\u009f\3\2\2\2")
        buf.write("\u00a1\u00a4\3\2\2\2\u00a2\u00a0\3\2\2\2\u00a2\u00a3\3")
        buf.write("\2\2\2\u00a3\u00a5\3\2\2\2\u00a4\u00a2\3\2\2\2\u00a5\u00a6")
        buf.write("\b\31\2\2\u00a6\62\3\2\2\2\u00a7\u00a8\6\32\2\2\u00a8")
        buf.write("\u00b4\59\35\2\u00a9\u00ab\7\17\2\2\u00aa\u00a9\3\2\2")
        buf.write("\2\u00aa\u00ab\3\2\2\2\u00ab\u00ac\3\2\2\2\u00ac\u00af")
        buf.write("\7\f\2\2\u00ad\u00af\4\16\17\2\u00ae\u00aa\3\2\2\2\u00ae")
        buf.write("\u00ad\3\2\2\2\u00af\u00b1\3\2\2\2\u00b0\u00b2\59\35\2")
        buf.write("\u00b1\u00b0\3\2\2\2\u00b1\u00b2\3\2\2\2\u00b2\u00b4\3")
        buf.write("\2\2\2\u00b3\u00a7\3\2\2\2\u00b3\u00ae\3\2\2\2\u00b4\u00b5")
        buf.write("\3\2\2\2\u00b5\u00b6\b\32\3\2\u00b6\64\3\2\2\2\u00b7\u00bb")
        buf.write("\59\35\2\u00b8\u00bb\5;\36\2\u00b9\u00bb\7=\2\2\u00ba")
        buf.write("\u00b7\3\2\2\2\u00ba\u00b8\3\2\2\2\u00ba\u00b9\3\2\2\2")
        buf.write("\u00bb\u00bc\3\2\2\2\u00bc\u00bd\b\33\4\2\u00bd\66\3\2")
        buf.write("\2\2\u00be\u00bf\13\2\2\2\u00bf8\3\2\2\2\u00c0\u00c2\t")
        buf.write("\b\2\2\u00c1\u00c0\3\2\2\2\u00c2\u00c3\3\2\2\2\u00c3\u00c1")
        buf.write("\3\2\2\2\u00c3\u00c4\3\2\2\2\u00c4:\3\2\2\2\u00c5\u00c6")
        buf.write("\7\61\2\2\u00c6\u00c7\7,\2\2\u00c7\u00cb\3\2\2\2\u00c8")
        buf.write("\u00ca\13\2\2\2\u00c9\u00c8\3\2\2\2\u00ca\u00cd\3\2\2")
        buf.write("\2\u00cb\u00cc\3\2\2\2\u00cb\u00c9\3\2\2\2\u00cc\u00ce")
        buf.write("\3\2\2\2\u00cd\u00cb\3\2\2\2\u00ce\u00cf\7,\2\2\u00cf")
        buf.write("\u00d0\7\61\2\2\u00d0<\3\2\2\2\22\2kz\u0080\u0088\u008d")
        buf.write("\u0093\u0099\u00a2\u00aa\u00ae\u00b1\u00b3\u00ba\u00c3")
        buf.write("\u00cb\5\3\31\2\3\32\3\b\2\2")
        return buf.getvalue()


class OWScriptLexer(Lexer):

    atn = ATNDeserializer().deserialize(serializedATN())

    decisionsToDFA = [ DFA(ds, i) for i, ds in enumerate(atn.decisionToState) ]

    T__0 = 1
    T__1 = 2
    T__2 = 3
    T__3 = 4
    T__4 = 5
    T__5 = 6
    T__6 = 7
    T__7 = 8
    T__8 = 9
    T__9 = 10
    T__10 = 11
    T__11 = 12
    T__12 = 13
    T__13 = 14
    T__14 = 15
    T__15 = 16
    T__16 = 17
    COMPARE = 18
    ASSIGN = 19
    STRING = 20
    INTEGER = 21
    FLOAT = 22
    ANNOTATION = 23
    NAME = 24
    NEWLINE = 25
    SKIP_ = 26
    UNKNOWN_CHAR = 27

    channelNames = [ u"DEFAULT_TOKEN_CHANNEL", u"HIDDEN" ]

    modeNames = [ "DEFAULT_MODE" ]

    literalNames = [ "<INVALID>",
            "'%'", "'^'", "'*'", "'/'", "'+'", "'-'", "'('", "')'", "','", 
            "'['", "']'", "'ms'", "'s'", "'min'", "'@'", "'<'", "'>'" ]

    symbolicNames = [ "<INVALID>",
            "COMPARE", "ASSIGN", "STRING", "INTEGER", "FLOAT", "ANNOTATION", 
            "NAME", "NEWLINE", "SKIP_", "UNKNOWN_CHAR" ]

    ruleNames = [ "T__0", "T__1", "T__2", "T__3", "T__4", "T__5", "T__6", 
                  "T__7", "T__8", "T__9", "T__10", "T__11", "T__12", "T__13", 
                  "T__14", "T__15", "T__16", "COMPARE", "ASSIGN", "STRING", 
                  "INTEGER", "FLOAT", "ANNOTATION", "NAME", "NEWLINE", "SKIP_", 
                  "UNKNOWN_CHAR", "SPACES", "COMMENT" ]

    grammarFileName = "OWScript.g4"

    def __init__(self, input=None, output:TextIO = sys.stdout):
        super().__init__(input, output)
        self.checkVersion("4.7.1")
        self._interp = LexerATNSimulator(self, self.atn, self.decisionsToDFA, PredictionContextCache())
        self._actions = None
        self._predicates = None


        # Workshop Ruleset
        self.workshop_rules = dict([
            ('ABORT', 'ACTION'),
            ('ABORT IF', 'ACTION'),
            ('ABORT IF CONDITION IS FALSE', 'ACTION'),
            ('ABORT IF CONDITION IS TRUE', 'ACTION'),
            ('ALLOW BUTTON', 'ACTION'),
            ('APPLY IMPULSE', 'ACTION'),
            ('BIG MESSAGE', 'ACTION'),
            ('CHASE GLOBAL VARIABLE AT RATE', 'ACTION'),
            ('CHASE GLOBAL VARIABLE OVER TIME', 'ACTION'),
            ('CHASE PLAYER VARIABLE AT RATE', 'ACTION'),
            ('CHASE PLAYER VARIABLE OVER TIME', 'ACTION'),
            ('CLEAR STATUS', 'ACTION'),
            ('COMMUNICATE', 'ACTION'),
            ('CREATE EFFECT', 'ACTION'),
            ('CREATE HUD TEXT', 'ACTION'),
            ('CREATE ICON', 'ACTION'),
            ('CREATE IN-WORLD TEXT', 'ACTION'),
            ('DAMAGE', 'ACTION'),
            ('DECLARE MATCH DRAW', 'ACTION'),
            ('DECLARE PLAYER VICTORY', 'ACTION'),
            ('DECLARE ROUND VICTORY', 'ACTION'),
            ('DECLARE TEAM VICTORY', 'ACTION'),
            ('DESTROY ALL EFFECTS', 'ACTION'),
            ('DESTROY ALL HUD TEXT', 'ACTION'),
            ('DESTROY ALL ICONS', 'ACTION'),
            ('DESTROY ALL IN-WORLD TEXT', 'ACTION'),
            ('DESTROY EFFECT', 'ACTION'),
            ('DESTROY HUD TEXT', 'ACTION'),
            ('DESTROY ICON', 'ACTION'),
            ('DESTROY IN-WORLD TEXT', 'ACTION'),
            ('DISABLE BUILT-IN GAME MODE ANNOUNCER', 'ACTION'),
            ('DISABLE BUILT-IN GAME MODE COMPLETION', 'ACTION'),
            ('DISABLE BUILT-IN GAME MODE MUSIC', 'ACTION'),
            ('DISABLE BUILT-IN GAME MODE RESPAWNING', 'ACTION'),
            ('DISABLE BUILT-IN GAME MODE SCORING', 'ACTION'),
            ('DISABLE DEATH SPECTATE ALL PLAYERS', 'ACTION'),
            ('DISABLE DEATH SPECTATE TARGET HUD', 'ACTION'),
            ('DISALLOW BUTTON', 'ACTION'),
            ('ENABLE BUILT-IN GAME MODE ANNOUNCER', 'ACTION'),
            ('ENABLE BUILT-IN GAME MODE COMPLETION', 'ACTION'),
            ('ENABLE BUILT-IN GAME MODE MUSIC', 'ACTION'),
            ('ENABLE BUILT-IN GAME MODE RESPAWNING', 'ACTION'),
            ('ENABLE BUILT-IN GAME MODE SCORING', 'ACTION'),
            ('ENABLE DEATH SPECTATE ALL PLAYERS', 'ACTION'),
            ('ENABLE DEATH SPECTATE TARGET HUD', 'ACTION'),
            ('GO TO ASSEMBLE HEROES', 'ACTION'),
            ('HEAL', 'ACTION'),
            ('KILL', 'ACTION'),
            ('LOOP', 'ACTION'),
            ('LOOP IF', 'ACTION'),
            ('LOOP IF CONDITION IS FALSE', 'ACTION'),
            ('LOOP IF CONDITION IS TRUE', 'ACTION'),
            ('MODIFY GLOBAL VARIABLE', 'ACTION'),
            ('MODIFY PLAYER SCORE', 'ACTION'),
            ('MODIFY PLAYER VARIABLE', 'ACTION'),
            ('MODIFY TEAM SCORE', 'ACTION'),
            ('PAUSE MATCH TIME', 'ACTION'),
            ('PLAY EFFECT', 'ACTION'),
            ('PRELOAD HERO', 'ACTION'),
            ('PRESS BUTTON', 'ACTION'),
            ('RESET PLAYER HERO AVAILABILITY', 'ACTION'),
            ('RESPAWN', 'ACTION'),
            ('RESURRECT', 'ACTION'),
            ('SET ABILITY 1 ENABLED', 'ACTION'),
            ('SET ABILITY 2 ENABLED', 'ACTION'),
            ('SET AIM SPEED', 'ACTION'),
            ('SET DAMAGE DEALT', 'ACTION'),
            ('SET DAMAGE RECEIVED', 'ACTION'),
            ('SET FACING', 'ACTION'),
            ('SET GLOBAL VARIABLE', 'ACTION'),
            ('SET GLOBAL VARIABLE AT INDEX', 'ACTION'),
            ('SET GRAVITY', 'ACTION'),
            ('SET HEALING DEALT', 'ACTION'),
            ('SET HEALING RECEIVED', 'ACTION'),
            ('SET INVISIBLE', 'ACTION'),
            ('SET MATCH TIME', 'ACTION'),
            ('SET MAX HEALTH', 'ACTION'),
            ('SET MOVE SPEED', 'ACTION'),
            ('SET OBJECTIVE DESCRIPTION', 'ACTION'),
            ('SET PLAYER ALLOWED HEROES', 'ACTION'),
            ('SET PLAYER SCORE', 'ACTION'),
            ('SET PLAYER VARIABLE', 'ACTION'),
            ('SET PLAYER VARIABLE AT INDEX', 'ACTION'),
            ('SET PRIMARY FIRE ENABLED', 'ACTION'),
            ('SET PROJECTILE GRAVITY', 'ACTION'),
            ('SET PROJECTILE SPEED', 'ACTION'),
            ('SET RESPAWN MAX TIME', 'ACTION'),
            ('SET SECONDARY FIRE ENABLED', 'ACTION'),
            ('SET SLOW MOTION', 'ACTION'),
            ('SET STATUS', 'ACTION'),
            ('SET TEAM SCORE', 'ACTION'),
            ('SET ULTIMATE ABILITY ENABLED', 'ACTION'),
            ('SET ULTIMATE CHARGE', 'ACTION'),
            ('SKIP', 'ACTION'),
            ('SKIP IF', 'ACTION'),
            ('SMALL MESSAGE', 'ACTION'),
            ('START ACCELERATING', 'ACTION'),
            ('START CAMERA', 'ACTION'),
            ('START DAMAGE MODIFICATION', 'ACTION'),
            ('START DAMAGE OVER TIME', 'ACTION'),
            ('START FACING', 'ACTION'),
            ('START FORCING PLAYER TO BE HERO', 'ACTION'),
            ('START FORCING SPAWN ROOM', 'ACTION'),
            ('START FORCING THROTTLE', 'ACTION'),
            ('START HEAL OVER TIME', 'ACTION'),
            ('START HOLDING BUTTON', 'ACTION'),
            ('STOP ACCELERATING', 'ACTION'),
            ('STOP ALL DAMAGE MODIFICATIONS', 'ACTION'),
            ('STOP ALL DAMAGE OVER TIME', 'ACTION'),
            ('STOP ALL HEAL OVER TIME', 'ACTION'),
            ('STOP CAMERA', 'ACTION'),
            ('STOP CHASING GLOBAL VARIABLE', 'ACTION'),
            ('STOP CHASING PLAYER VARIABLE', 'ACTION'),
            ('STOP DAMAGE MODIFICATION', 'ACTION'),
            ('STOP DAMAGE OVER TIME', 'ACTION'),
            ('STOP FACING', 'ACTION'),
            ('STOP FORCING PLAYER TO BE HERO', 'ACTION'),
            ('STOP FORCING SPAWN ROOM', 'ACTION'),
            ('STOP FORCING THROTTLE', 'ACTION'),
            ('STOP HEAL OVER TIME', 'ACTION'),
            ('STOP HOLDING BUTTON', 'ACTION'),
            ('TELEPORT', 'ACTION'),
            ('UNPAUSE MATCH TIME', 'ACTION'),
            ('WAIT', 'ACTION'),
            ('ACTIONS', 'ACTIONS'),
            ('CONDITIONS', 'CONDITIONS'),
            ('ALL HEROES', 'CONST'),
            ('ATTACKER', 'CONST'),
            ('BACKWARD', 'CONST'),
            ('CONTROL MODE SCORING TEAM', 'CONST'),
            ('CURRENT ARRAY ELEMENT', 'CONST'),
            ('DOWN', 'CONST'),
            ('EMPTY ARRAY', 'CONST'),
            ('EVENT PLAYER', 'CONST'),
            ('EVENT WAS CRITICAL HIT', 'CONST'),
            ('FALSE', 'CONST'),
            ('FORWARD', 'CONST'),
            ('IS ASSEMBLING HEROES', 'CONST'),
            ('IS BETWEEN ROUNDS', 'CONST'),
            ('IS CONTROL MODE POINT LOCKED', 'CONST'),
            ('IS CTF MODE IN SUDDEN DEATH', 'CONST'),
            ('IS GAME IN PROGRESS', 'CONST'),
            ('IS IN SETUP', 'CONST'),
            ('IS MATCH COMPLETE', 'CONST'),
            ('IS WAITING FOR PLAYERS', 'CONST'),
            ('LAST CREATED ENTITY', 'CONST'),
            ('LEFT', 'CONST'),
            ('NULL', 'CONST'),
            ('PAYLOAD POSITION', 'CONST'),
            ('RIGHT', 'CONST'),
            ('TRUE', 'CONST'),
            ('UP', 'CONST'),
            ('VICTIM', 'CONST'),
            ('EVENT', 'EVENT'),
            ('ONGOING - EACH PLAYER', 'NAME'),
            ('ONGOING - GLOBAL', 'NAME'),
            ('PLAYER DEALT DAMAGE', 'NAME'),
            ('PLAYER DEALT FINAL BLOW', 'NAME'),
            ('PLAYER DIED', 'NAME'),
            ('PLAYER EARNED ELIMINATION', 'NAME'),
            ('PLAYER TOOK DAMAGE', 'NAME'),
            ('ABSOLUTE VALUE', 'VALUE'),
            ('ADD', 'VALUE'),
            ('ALL DEAD PLAYERS', 'VALUE'),
            ('ALL LIVING PLAYERS', 'VALUE'),
            ('ALL PLAYERS', 'VALUE'),
            ('ALL PLAYERS NOT ON OBJECTIVE', 'VALUE'),
            ('ALL PLAYERS ON OBJECTIVE', 'VALUE'),
            ('ALLOWED HEROES', 'VALUE'),
            ('ALTITUDE OF', 'VALUE'),
            ('AND', 'VALUE'),
            ('ANGLE DIFFERENCE', 'VALUE'),
            ('APPEND TO ARRAY', 'VALUE'),
            ('ARRAY SLICE', 'VALUE'),
            ('CLOSEST PLAYER TO', 'VALUE'),
            ('COMPARE', 'VALUE'),
            ('CONTROL MODE SCORING PERCENTAGE', 'VALUE'),
            ('COSINE FROM DEGREES', 'VALUE'),
            ('COSINE FROM RADIANS', 'VALUE'),
            ('COUNT OF', 'VALUE'),
            ('CROSS PRODUCT', 'VALUE'),
            ('DIRECTION FROM ANGLES', 'VALUE'),
            ('DIRECTION TOWARDS', 'VALUE'),
            ('DISTANCE BETWEEN', 'VALUE'),
            ('DIVIDE', 'VALUE'),
            ('DOT PRODUCT', 'VALUE'),
            ('ENTITY EXISTS', 'VALUE'),
            ('EVENT DAMAGE', 'VALUE'),
            ('EYE POSITION', 'VALUE'),
            ('FACING DIRECTION OF', 'VALUE'),
            ('FARTHEST PLAYER FROM', 'VALUE'),
            ('FILTERED ARRAY', 'VALUE'),
            ('FIRST OF', 'VALUE'),
            ('FLAG POSITION', 'VALUE'),
            ('GLOBAL VARIABLE', 'VALUE'),
            ('HAS SPAWNED', 'VALUE'),
            ('HAS STATUS', 'VALUE'),
            ('HEALTH', 'VALUE'),
            ('HEALTH PERCENT', 'VALUE'),
            ('HERO', 'VALUE'),
            ('HERO ICON STRING', 'VALUE'),
            ('HERO OF', 'VALUE'),
            ('HORIZONTAL ANGLE FROM DIRECTION', 'VALUE'),
            ('HORIZONTAL ANGLE TOWARDS', 'VALUE'),
            ('HORIZONTAL FACING ANGLE OF', 'VALUE'),
            ('HORIZONTAL SPEED OF', 'VALUE'),
            ('INDEX OF ARRAY VALUE', 'VALUE'),
            ('IS ALIVE', 'VALUE'),
            ('IS BUTTON HELD', 'VALUE'),
            ('IS COMMUNICATING', 'VALUE'),
            ('IS COMMUNICATING ANY', 'VALUE'),
            ('IS COMMUNICATING ANY EMOTE', 'VALUE'),
            ('IS COMMUNICATING ANY VOICE LINE', 'VALUE'),
            ('IS CROUCHING', 'VALUE'),
            ('IS DEAD', 'VALUE'),
            ('IS FIRING PRIMARY', 'VALUE'),
            ('IS FIRING SECONDARY', 'VALUE'),
            ('IS FLAG AT BASE', 'VALUE'),
            ('IS FLAG BEING CARRIED', 'VALUE'),
            ('IS HERO BEING PLAYED', 'VALUE'),
            ('IS IN AIR', 'VALUE'),
            ('IS IN LINE OF SIGHT', 'VALUE'),
            ('IS IN SPAWN ROOM', 'VALUE'),
            ('IS IN VIEW ANGLE', 'VALUE'),
            ('IS MOVING', 'VALUE'),
            ('IS OBJECTIVE COMPLETE', 'VALUE'),
            ('IS ON GROUND', 'VALUE'),
            ('IS ON OBJECTIVE', 'VALUE'),
            ('IS ON WALL', 'VALUE'),
            ('IS PORTRAIT ON FIRE', 'VALUE'),
            ('IS STANDING', 'VALUE'),
            ('IS TEAM ON DEFENSE', 'VALUE'),
            ('IS TEAM ON OFFENSE', 'VALUE'),
            ('IS TRUE FOR ALL', 'VALUE'),
            ('IS TRUE FOR ANY', 'VALUE'),
            ('IS USING ABILITY 1', 'VALUE'),
            ('IS USING ABILITY 2', 'VALUE'),
            ('IS USING ULTIMATE', 'VALUE'),
            ('LAST DAMAGE MODIFICATION ID', 'VALUE'),
            ('LAST DAMAGE OVER TIME ID', 'VALUE'),
            ('LAST HEAL OVER TIME ID', 'VALUE'),
            ('LAST OF', 'VALUE'),
            ('LAST TEXT ID', 'VALUE'),
            ('LOCAL VECTOR OF', 'VALUE'),
            ('MATCH ROUND', 'VALUE'),
            ('MATCH TIME', 'VALUE'),
            ('MAX', 'VALUE'),
            ('MAX HEALTH', 'VALUE'),
            ('MIN', 'VALUE'),
            ('MODULO', 'VALUE'),
            ('MULTIPLY', 'VALUE'),
            ('NEAREST WALKABLE POSITION', 'VALUE'),
            ('NORMALIZE', 'VALUE'),
            ('NOT', 'VALUE'),
            ('NUMBER', 'VALUE'),
            ('NUMBER OF DEAD PLAYERS', 'VALUE'),
            ('NUMBER OF DEATHS', 'VALUE'),
            ('NUMBER OF ELIMINATIONS', 'VALUE'),
            ('NUMBER OF FINAL BLOWS', 'VALUE'),
            ('NUMBER OF HEROES', 'VALUE'),
            ('NUMBER OF LIVING PLAYERS', 'VALUE'),
            ('NUMBER OF PLAYERS', 'VALUE'),
            ('NUMBER OF PLAYERS ON OBJECTIVE', 'VALUE'),
            ('OBJECTIVE INDEX', 'VALUE'),
            ('OBJECTIVE POSITION', 'VALUE'),
            ('OPPOSITE TEAM OF', 'VALUE'),
            ('OR', 'VALUE'),
            ('PAYLOAD PROGRESS PERCENTAGE', 'VALUE'),
            ('PLAYER CARRYING FLAG', 'VALUE'),
            ('PLAYER CLOSEST TO RETICLE', 'VALUE'),
            ('PLAYER VARIABLE', 'VALUE'),
            ('PLAYERS IN SLOT', 'VALUE'),
            ('PLAYERS IN VIEW ANGLE', 'VALUE'),
            ('PLAYERS ON HERO', 'VALUE'),
            ('PLAYERS WITHIN RADIUS', 'VALUE'),
            ('POINT CAPTURE PERCENTAGE', 'VALUE'),
            ('POSITION OF', 'VALUE'),
            ('RAISE TO POWER', 'VALUE'),
            ('RANDOM INTEGER', 'VALUE'),
            ('RANDOM REAL', 'VALUE'),
            ('RANDOM VALUE IN ARRAY', 'VALUE'),
            ('RANDOMIZED ARRAY', 'VALUE'),
            ('RAY CAST HIT NORMAL', 'VALUE'),
            ('RAY CAST HIT PLAYER', 'VALUE'),
            ('RAY CAST HIT POSITION', 'VALUE'),
            ('REMOVE FROM ARRAY', 'VALUE'),
            ('ROUND TO INTEGER', 'VALUE'),
            ('SCORE OF', 'VALUE'),
            ('SINE FROM DEGREES', 'VALUE'),
            ('SINE FROM RADIANS', 'VALUE'),
            ('SLOT OF', 'VALUE'),
            ('SORTED ARRAY', 'VALUE'),
            ('SPEED OF', 'VALUE'),
            ('SPEED OF IN DIRECTION', 'VALUE'),
            ('SQUARE ROOT', 'VALUE'),
            ('STRING', 'VALUE'),
            ('SUBTRACT', 'VALUE'),
            ('TEAM', 'VALUE'),
            ('TEAM OF', 'VALUE'),
            ('TEAM SCORE', 'VALUE'),
            ('THROTTLE OF', 'VALUE'),
            ('TOTAL TIME ELAPSED', 'VALUE'),
            ('ULTIMATE CHARGE PERCENT', 'VALUE'),
            ('VALUE IN ARRAY', 'VALUE'),
            ('VECTOR', 'VALUE'),
            ('VECTOR TOWARDS', 'VALUE'),
            ('VELOCITY OF', 'VALUE'),
            ('VERTICAL ANGLE FROM DIRECTION', 'VALUE'),
            ('VERTICAL ANGLE TOWARDS', 'VALUE'),
            ('VERTICAL FACING ANGLE OF', 'VALUE'),
            ('VERTICAL SPEED OF', 'VALUE'),
            ('WORLD VECTOR OF', 'VALUE'),
            ('X COMPONENT OF', 'VALUE'),
            ('Y COMPONENT OF', 'VALUE'),
            ('Z COMPONENT OF', 'VALUE')
        ])
        self.aliases = dict([
            ('ALL TRUE', 'IS TRUE FOR ALL'),
            ('COS', 'COSINE FROM DEGREES'),
            ('COSR', 'COSINE FROM RADIANS'),
            ('ON EACH PLAYER', 'ONGOING - EACH PLAYER'),
            ('ON GLOBAL', 'ONGOING - GLOBAL'),
            ('PLAYERS IN RADIUS', 'PLAYERS WITHIN RADIUS'),
            ('ROUND', 'ROUND TO INTEGER'),
            ('SIN', 'SINE FROM DEGREES'),
            ('SINR', 'SINE FROM RADIANS')
        ])
        # A queue where extra tokens are pushed on (see the NEWLINE lexer rule).
        self.tokens = []

        # The stack that keeps track of the indentation level.
        self.indents = []

        # The amount of opened braces, brackets and parenthesis.
        self.opened = 0

        # The most recently produced token.
        self.last_token = None

    def emitToken(self, t):
        super().emitToken(t)
        self.tokens.append(t)

    def nextToken(self):
        if self._input.LA(1) == Token.EOF and len(self.indents) > 0:
            while len(self.tokens) > 0 and self.tokens[-1].type == Token.EOF:
                del self.tokens[-1]

            # First emit an extra line break that serves as the end of the statement.
            self.emitToken(self.common_token(OWScriptLexer.NEWLINE, '\n', alias='NEWLINE'));

            # Now emit as much DEDENT tokens as needed.
            while len(self.indents) != 0:
                self.emitToken(self.create_dedent())
                del self.indents[-1]

            # Put the EOF back on the token stream.
            self.emitToken(self.common_token(Token.EOF, '<EOF>', alias='EOF'));

        next = super().nextToken();

        if next.channel == Token.DEFAULT_CHANNEL:
            # Keep track of the last token on the default channel.
            self.last_token = next

        if len(self.tokens) == 0:
            return next
        else:
            t = self.tokens[0]
            del self.tokens[0]
            return t

    def create_dedent(self):
        from OWScriptParser import OWScriptParser
        dedent = self.common_token(OWScriptParser.DEDENT, '', alias='DEDENT')
        dedent.line = self.last_token.line
        return dedent

    def common_token(self, _type, text, alias=None):
        from antlr4.Token import CommonToken
        stop = self.getCharIndex() - 1
        if len(self.text) == 0:
            start = stop
        else:
            start = stop - len(self.text) + 1
        token = CommonToken(self._tokenFactorySourcePair, _type, Lexer.DEFAULT_TOKEN_CHANNEL, start, stop)
        token._text = ''
        if alias is not None:
            pass
            token._text = alias
        return token

    def getIndentationCount(self, spaces):
        count = 0
        for ch in spaces:
            if ch == '\t':
                count += 8 - (count % 8)
            else:
                count += 1
        return count

    def atStartOfInput(self):
        return self._interp.column == 0 and self._interp.line == 1


    def action(self, localctx:RuleContext, ruleIndex:int, actionIndex:int):
        if self._actions is None:
            actions = dict()
            actions[23] = self.NAME_action 
            actions[24] = self.NEWLINE_action 
            self._actions = actions
        action = self._actions.get(ruleIndex, None)
        if action is not None:
            action(localctx, actionIndex)
        else:
            raise Exception("No registered action for:" + str(ruleIndex))

    def NAME_action(self, localctx:RuleContext , actionIndex:int):
        if actionIndex == 0:

                from OWScriptParser import OWScriptParser
                self.text = self.text.strip()
                if self.text.startswith('gVar'):
                    self.type = OWScriptParser.GLOBAL_VAR
                    self.text = self.text.lstrip('gVar').lstrip()
                elif self.text.startswith('pVar'):
                    self.type = OWScriptParser.PLAYER_VAR
                    self.text = self.text.lstrip('pVar').lstrip()
                else:
                    text = self.text.upper()
                    if text == 'RULE':
                        self.type = OWScriptParser.RULE
                    elif text in ('EVENT', 'CONDITIONS', 'ACTIONS'):
                        self.type = OWScriptParser.RULEBLOCK
                    elif text in self.aliases or text in self.workshop_rules:
                        text = self.aliases.get(text, text)
                        attr = self.workshop_rules.get(text)
                        self.type = getattr(OWScriptParser, attr)
                        self.text = text
                
     

    def NEWLINE_action(self, localctx:RuleContext , actionIndex:int):
        if actionIndex == 1:

                import re
                from OWScriptParser import OWScriptParser
                new_line = re.sub(r"[^\r\n\f]+", "", self._interp.getText(self._input)) #.replaceAll("[^\r\n\f]+", "")
                spaces = re.sub(r"[\r\n\f]+", "", self._interp.getText(self._input)) #.replaceAll("[\r\n\f]+", "")
                next = self._input.LA(1)

                if self.opened > 0 or next == '\r' or next == '\n' or next == '\f':
                    self.skip()
                else:
                    self.emitToken(self.common_token(self.NEWLINE, new_line, 'NEWLINE'))

                    indent = self.getIndentationCount(spaces)
                    if len(self.indents) == 0:
                        previous = 0
                    else:
                        previous = self.indents[-1]

                    if indent == previous:
                        self.skip()
                    elif indent > previous:
                        self.indents.append(indent)
                        self.emitToken(self.common_token(OWScriptParser.INDENT, spaces, alias='INDENT'))
                    else:
                        while len(self.indents) > 0 and self.indents[-1] > indent:
                            self.emitToken(self.create_dedent())
                            del self.indents[-1]

     

    def sempred(self, localctx:RuleContext, ruleIndex:int, predIndex:int):
        if self._predicates is None:
            preds = dict()
            preds[24] = self.NEWLINE_sempred
            self._predicates = preds
        pred = self._predicates.get(ruleIndex, None)
        if pred is not None:
            return pred(localctx, predIndex)
        else:
            raise Exception("No registered predicate for:" + str(ruleIndex))

    def NEWLINE_sempred(self, localctx:RuleContext, predIndex:int):
            if predIndex == 0:
                return self.atStartOfInput()
         


